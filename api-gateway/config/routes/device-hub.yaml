routes:
  # MQTT-over-WebSocket endpoint used by the frontend for realtime HDP data.
  - path: /ws/hdp
    upstream: ws://mosquitto:9001/
    methods: [GET]
    access: auth
    type: websocket-mqtt

  - path: /api/hdp/devices
    upstream: http://device-hub:8090/api/hdp/devices
    methods: [GET, POST]
    access: resident
    type: rest
  # Catch-all for device-specific endpoints. HDP device IDs can contain slashes
  # (e.g. zigbee/0x...), so we must not use single-segment params like {id}.
  - path: /api/hdp/devices/*
    upstream: http://device-hub:8090/api/hdp/devices/*
    methods: [GET, POST, PATCH, DELETE]
    access: resident
    type: rest
  - path: /api/hdp/integrations
    upstream: http://device-hub:8090/api/hdp/integrations
    methods: [GET]
    access: resident
    type: rest
  - path: /api/hdp/pairings
    upstream: http://device-hub:8090/api/hdp/pairings
    methods: [GET, POST, DELETE]
    access: resident
    type: rest
  - path: /api/hdp/pairing-config
    upstream: http://device-hub:8090/api/hdp/pairing-config
    methods: [GET]
    access: resident
    type: rest
